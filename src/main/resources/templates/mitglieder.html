<!DOCTYPE html>
<html lang="de">
<head>
    <link rel="stylesheet" href="generell.css">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Registrieren</title>
</head>
<body>
<div>
    <h1>Hier k√∂nnen ganz einfach Mitglieder registriert werden!</h1>
</div>
<div>
    <form name="forms" id="forms">
        <label>Vorname:
            <input name="vorname" type="text" placeholder="Vornamen eingeben"/>
        </label><br>
        <label>Nachname:
            <input name="name" type="text" placeholder="Nachname eingeben"/>
        </label><br>
        <label>Alter:
            <input name="alter" type="number" placeholder="Alter eingeben"/>
        </label><br>
        <label>Adresse:
            <input name="adresse" type="text" placeholder="Adresse eingeben"/>
        </label><br>
        <button type="submit">Angaben speichern</button>
    </form>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script>
        const formElement = document.querySelector('form#forms')

        const getFormJSON = (form) => {
            const data = new FormData(form);
            return Array.from(data.keys()).reduce((result, key) => {
                result[key] = data.get(key);
                return result;
            }, {});
        };

        const handler = (event) => {
            event.preventDefault();
            const valid = formElement.reportValidity();
            if (valid) {
                const result = getFormJSON(formElement);
                $.ajax({
                    url: 'http://localhost:8080/mitglied/registrieren',
                    type: 'POST',
                    contentType: 'application/json; charset=utf-8',
                    data: JSON.stringify(result)
                });
                console.log(result)
            }
        }

        formElement.addEventListener("submit", handler)
    </script>
</div>
<div id="footer">
    <p>Zur Startseite: <a href="/">Startseite</a></p>
    <p>Mitgliedsdaten einsehen: <a href="/mitgliedsdaten">Mitgliedsdaten einsehen</a></p>
</div>
</body>
</html>
